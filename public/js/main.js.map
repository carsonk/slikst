{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["// CSRF token\nvar _token = $('meta[name=_token]').attr('content');\n\n$(document).ready(function() {\n    // Error Creation\n\n    function float_error(message, persistTime) {\n        if(typeof message === 'undefined' || persistTime < 0)\n        {\n            return false;\n        }\n\n        var source = $(\"#float-error-template\").html();\n        var template = Handlebars.compile(source);\n        var html = template({message: message});\n\n        $(\".float-error\").fadeOut().remove(); // Removes any current float-errors.\n        $(\"body\").append(html);\n        $(\".float-error\").fadeIn(1000);\n\n        if(typeof persistTime === 'number' && persistTime > 0)\n        {\n\n        }\n    }\n\n    // School selection suggestions.\n\n    var schoolSelect = $(\"#school-select\");\n\n    if(schoolSelect) {\n        var schoolSelectId = $(\"#school-select-id\");\n        var schoolSelectSubmitTo = schoolSelect.data('submit-to');\n        var schoolSuggestions = $(\".school-suggestions\");\n\n        var schoolSuggestionTemplate = Handlebars.compile('<li class=\"school-suggestion list-group-item\" data-school-id=\"{{id}}\">{{ name }}</li>');\n\n        // Sends query to server to lookup when done typing.\n        schoolSelect.doneTyping(function(event) {\n            var element = $(this);\n\n            $.post(schoolSelectSubmitTo, { query: element.val(), _token: _token }, function(data) {\n                if('schools' in data) {\n                    schoolSuggestions.empty();\n\n                    if(data.schools.length > 0) {\n                        schoolSuggestions.slideDown();\n\n                        $.each(data.schools, function(key, value) {\n                            var templateContext = { id: value.id, name: value.name };\n                            var newListItem = schoolSuggestionTemplate(templateContext);\n                            schoolSuggestions.append(newListItem);\n                        });\n                    } else {\n                        schoolSuggestions.slideUp(); // Hide if there are no results.\n                        // TODO: Have a \"no results\" message appear.\n                    }\n                } else {\n                    float_error(\"Unable to grab schools data.\");\n                }\n            }, \"json\")\n            .fail(function() {\n                float_error(\"Unable to grab schools data.\");\n            });\n        });\n\n        // Listen for selecting the links.\n        schoolSuggestions.on(\"click\", \".school-suggestion\", function() {\n            var clickedElement = $(this);\n            var school = {\n                id: clickedElement.data('school-id'),\n                name: clickedElement.text()\n            };\n\n            schoolSuggestions.hide();\n\n            schoolSelect.val(school.name);\n            schoolSelectId.val(school.id);\n            schoolSelect.attr(\"readonly\", true);\n        });\n    }\n\n});\n"],"sourceRoot":"/source/"}